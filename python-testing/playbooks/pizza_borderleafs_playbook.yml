---
- hosts: borderleafs_pizza
  gather_facts: no
  tasks:
    - name: Register variables from underlay-pizza_all.yml
      include_vars:
        file: "{{lookup('env','PWD')}}/vars/underlay-pizza_all.yml"  
        name: underlay       
    - name: Create Borderleafs Configuration
      template:
        src: "{{lookup('env','PWD')}}/templates/borderleaf.j2"
        dest: "{{lookup('env','PWD')}}/configs/{{inventory_hostname}}_config_bl.conf"
    # Push Configuration to Device
    eos_config:
        src: "{{lookup('env','PWD')}}/configs/{{inventory_hostname}}_config_bl.conf"
