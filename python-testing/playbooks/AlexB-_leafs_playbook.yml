---
- hosts: leafs_AlexB-
  gather_facts: no
  tasks:
    - name: Register variables from underlay-AlexB-_all.yml
      include_vars:
        file: "{{lookup('env','PWD')}}/vars/underlay-AlexB-_all.yml"  
        name: underlay       
    - name: Create Leafs Configuration
      template:
        src: "{{lookup('env','PWD')}}/templates/leaf.j2"
        dest: "{{lookup('env','PWD')}}/configs/{{inventory_hostname}}_config_bgp.conf"
    # Push Configuration to Device
    eos_config:
        src: "{{lookup('env','PWD')}}/configs/{{inventory_hostname}}_config_bgp.conf"
